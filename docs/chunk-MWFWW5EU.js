import{A as u,B as _,C as A,D as Y,E as w,F,G as D,H as Z,I as M,J as g,K as N,L as ee,M as te,Q as ie,S as ne,T as oe,U as z,X as j,Y as b,_ as re,a as k,b as q,c as U,d as H,e as v,f as G,g as B,h as K,i as h,j as T,k as Q,l as W,m as P,n as c,o as f,p as d,q as p,r,s as o,t as m,u as X,v as x,w as C,x as R,y as L,z as a}from"./chunk-MMMQ75F6.js";var y=(()=>{let e=class e{constructor(i){this.httpClient=i,this.apiUrl="https://restcountries.com/v3.1",this.cacheStore={byCapital:{term:"",countries:[]},byCountry:{term:"",countries:[]},byRegion:{region:"",countries:[]}},this.loadFromLocalStorage()}saveToLocalStorage(){localStorage.setItem("cacheStore",JSON.stringify(this.cacheStore))}loadFromLocalStorage(){localStorage.getItem("cacheStore")&&(this.cacheStore=JSON.parse(localStorage.getItem("cacheStore")))}getCountriesRequest(i){return this.httpClient.get(i).pipe(U(()=>k([])))}searchCountryByAlphaCode(i){let n=`${this.apiUrl}/alpha/${i}`;return this.httpClient.get(n).pipe(q(s=>s.length>0?s[0]:null),U(()=>k(null)))}searchCapital(i){let n=`${this.apiUrl}/capital/${i}`;return this.getCountriesRequest(n).pipe(v(s=>{this.cacheStore.byCapital={term:i,countries:s}}),v(()=>this.saveToLocalStorage()))}searchCountry(i){let n=`${this.apiUrl}/name/${i}`;return this.getCountriesRequest(n).pipe(v(s=>{this.cacheStore.byCountry={term:i,countries:s}}),v(()=>this.saveToLocalStorage()))}searchRegion(i){let n=`${this.apiUrl}/region/${i}`;return this.getCountriesRequest(n).pipe(v(s=>{this.cacheStore.byRegion={region:i,countries:s}}),v(()=>this.saveToLocalStorage()))}};e.\u0275fac=function(n){return new(n||e)(K(te))},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ue=t=>["/countries/by",t];function he(t,e){t&1&&(r(0,"div",2),a(1,` No hay paises
`),o())}function fe(t,e){if(t&1&&(r(0,"tr")(1,"td"),a(2),o(),r(3,"td"),m(4,"img",5),o(),r(5,"td"),a(6),o(),r(7,"td"),a(8),o(),r(9,"td"),a(10),w(11,"number"),o(),r(12,"td")(13,"a",6),a(14,"Ver mas"),o()()()),t&2){let l=e.$implicit,i=e.index;c(2),u(i+1),c(2),p("src",l.flags.svg,P),c(2),u(l.name.common),c(2),u(l.capital),c(2),u(F(11,6,l.population)),c(3),p("routerLink",Y(8,ue,l.cca3))}}function ge(t,e){if(t&1&&(r(0,"table",3)(1,"thead")(2,"tr")(3,"th"),a(4,"#"),o(),r(5,"th"),a(6,"Bandera"),o(),r(7,"th"),a(8,"Pais"),o(),r(9,"th"),a(10,"Capital"),o(),r(11,"th"),a(12,"Poblacion"),o()()(),r(13,"tbody"),d(14,fe,15,10,"tr",4),o()()),t&2){let l=C();c(14),p("ngForOf",l.countries)}}var I=(()=>{let e=class e{constructor(){this.countries=[]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=h({type:e,selectors:[["countries-table"]],inputs:{countries:"countries"},decls:3,vars:2,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],["alt","",3,"src"],[3,"routerLink"]],template:function(n,s){if(n&1&&d(0,he,2,0,"div",1)(1,ge,15,1,"ng-template",null,0,D),n&2){let E=L(2);p("ngIf",s.countries.length===0)("ngIfElse",E)}},dependencies:[M,g,oe,N],styles:["img[_ngcontent-%COMP%]{width:25px}"]});let t=e;return t})();function ve(t,e){t&1&&m(0,"shared-loading-spinner")}var ce=(()=>{let e=class e{constructor(i){this.countriesService=i,this.countries=[],this.isLoading=!1,this.initialSearchValue=""}ngOnInit(){this.countries=this.countriesService.cacheStore.byCapital.countries,this.initialSearchValue=this.countriesService.cacheStore.byCapital.term}searchByCapital(i){this.isLoading=!0,this.countriesService.searchCapital(i).subscribe(n=>{this.isLoading=!1,this.countries=n})}};e.\u0275fac=function(n){return new(n||e)(f(y))},e.\u0275cmp=h({type:e,selectors:[["app-by-capital-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Buscar por capital",3,"onDebounce","defaultValue"],[4,"ngIf"],[3,"countries"]],template:function(n,s){n&1&&(r(0,"h2"),a(1,"Por capital"),o(),m(2,"hr"),r(3,"div",0)(4,"div",1)(5,"shared-search-box",2),x("onDebounce",function($){return s.searchByCapital($)}),o()()(),r(6,"div",0)(7,"div",1),m(8,"hr"),d(9,ve,1,0,"shared-loading-spinner",3),m(10,"countries-table",4),o()()),n&2&&(c(5),R("defaultValue",s.initialSearchValue),c(4),p("ngIf",s.isLoading),c(),p("countries",s.countries))},dependencies:[g,j,b,I]});let t=e;return t})();function Ce(t,e){t&1&&m(0,"shared-loading-spinner")}var se=(()=>{let e=class e{constructor(i){this.countriesService=i,this.countries=[],this.isLoading=!1,this.initialSearchValue=""}ngOnInit(){this.countries=this.countriesService.cacheStore.byCountry.countries,this.initialSearchValue=this.countriesService.cacheStore.byCountry.term}searchByCountry(i){this.isLoading=!0,this.countriesService.searchCountry(i).subscribe(n=>{this.countries=n,this.isLoading=!1})}};e.\u0275fac=function(n){return new(n||e)(f(y))},e.\u0275cmp=h({type:e,selectors:[["app-by-country-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],["placeholder","Buscar por pais",3,"onDebounce","defaultValue"],[4,"ngIf"],[3,"countries"]],template:function(n,s){n&1&&(r(0,"h2"),a(1,"Por pais"),o(),m(2,"hr"),r(3,"div",0)(4,"div",1)(5,"shared-search-box",2),x("onDebounce",function($){return s.searchByCountry($)}),o()()(),r(6,"div",0)(7,"div",1),m(8,"hr"),d(9,Ce,1,0,"shared-loading-spinner",3),m(10,"countries-table",4),o()()),n&2&&(c(5),R("defaultValue",s.initialSearchValue),c(4),p("ngIf",s.isLoading),c(),p("countries",s.countries))},dependencies:[g,j,b,I]});let t=e;return t})();function Se(t,e){if(t&1){let l=X();r(0,"button",6),x("click",function(){let n=Q(l).$implicit,s=C();return W(s.searchByRegion(n))}),a(1),o()}if(t&2){let l=e.$implicit,i=C();p("ngClass",i.selectedRegion===l?"btn-primary":"btn-light"),c(),_(" ",l," ")}}function xe(t,e){t&1&&m(0,"shared-loading-spinner")}var le=(()=>{let e=class e{constructor(i){this.countriesService=i,this.countries=[],this.regions=["Africa","Americas","Asia","Europe","Oceania"],this.isLoading=!1}ngOnInit(){this.countries=this.countriesService.cacheStore.byRegion.countries,this.selectedRegion=this.countriesService.cacheStore.byRegion.region}searchByRegion(i){this.isLoading=!0,this.selectedRegion=i,this.countriesService.searchRegion(i).subscribe(n=>{this.countries=n,this.isLoading=!1})}};e.\u0275fac=function(n){return new(n||e)(f(y))},e.\u0275cmp=h({type:e,selectors:[["app-by-region-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col","text-center"],["class","col text-center btn mx-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col"],[4,"ngIf"],[3,"countries"],[1,"col","text-center","btn","mx-2",3,"click","ngClass"]],template:function(n,s){n&1&&(r(0,"h2"),a(1,"Por region"),o(),m(2,"hr"),r(3,"div",0)(4,"div",1),d(5,Se,2,2,"button",2),o()(),r(6,"div",0)(7,"div",3),m(8,"hr"),d(9,xe,1,0,"shared-loading-spinner",4),m(10,"countries-table",5),o()()),n&2&&(c(5),p("ngForOf",s.regions),c(4),p("ngIf",s.isLoading),c(),p("countries",s.countries))},dependencies:[Z,M,g,b,I]});let t=e;return t})();function be(t,e){t&1&&(r(0,"div",2),a(1," Espere por favor "),o())}function Ie(t,e){if(t&1&&(r(0,"div")(1,"div",3)(2,"div",4)(3,"h2"),a(4),o(),m(5,"hr"),o()(),r(6,"div",3)(7,"div",5)(8,"h3"),a(9,"Bandera"),o(),m(10,"img",6),o(),r(11,"div",7)(12,"ul",8)(13,"h3"),a(14,"Informaci\xF3n"),o(),r(15,"li",9)(16,"b"),a(17,"C\xF3digo pa\xEDs:"),o(),a(18),o(),r(19,"li",9)(20,"b"),a(21,"Capital:"),o(),a(22),o(),r(23,"li",9)(24,"b"),a(25," Poblacion:"),o(),a(26),w(27,"number"),o()()()(),r(28,"div",10)(29,"div",7)(30,"h3"),a(31,"Traducciones"),o(),r(32,"div",11)(33,"span",12),a(34),o(),r(35,"span",12),a(36),o(),r(37,"span",12),a(38),o(),r(39,"span",12),a(40),o(),r(41,"span",12),a(42),o()()()()()),t&2){let l=C();c(4),A("",l.country.name.common,", ",l.country.altSpellings[1],""),c(6),p("src",l.country.flags.svg,P)("alt",l.country.name.common),c(8),A(" ",l.country.cca3,"/ ",l.country.cca2," "),c(4),_(" ",l.country.capital," "),c(4),_(" ",F(27,13,l.country.population)," "),c(8),u(l.country.translations.cym.common),c(2),u(l.country.translations.spa.common),c(2),u(l.country.translations.zho.common),c(2),u(l.country.translations.jpn.common),c(2),u(l.country.translations.ara.common)}}var me=(()=>{let e=class e{constructor(i,n,s){this.activatedRoute=i,this.router=n,this.countriesService=s}ngOnInit(){this.activatedRoute.params.pipe(H(({id:i})=>this.countriesService.searchCountryByAlphaCode(i))).subscribe(i=>(console.log(i),i?this.country=i:this.router.navigateByUrl("")))}};e.\u0275fac=function(n){return new(n||e)(f(ie),f(ne),f(y))},e.\u0275cmp=h({type:e,selectors:[["app-country-page"]],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[1,"alert","alert-info","text-center"],[1,"row"],[1,"col-12"],[1,"col-4","text-center"],[1,"img-thumbnail",3,"src","alt"],[1,"col"],[1,"list-group"],[1,"list-group-item"],[1,"row","mt-2"],[1,"d-flex","flex-wrap"],[1,"badge","bg-primary","m-1"]],template:function(n,s){if(n&1&&d(0,be,2,0,"ng-template",null,0,D)(2,Ie,43,15,"div",1),n&2){let E=L(1);c(2),p("ngIf",s.country)("ngIfElse",E)}},dependencies:[g,N]});let t=e;return t})();var Ee=[{path:"by-capital",component:ce},{path:"by-country",component:se},{path:"by-region",component:le},{path:"by/:id",component:me},{path:"**",redirectTo:"by-capital"}],pe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=T({type:e}),e.\u0275inj=B({imports:[z.forChild(Ee),z]});let t=e;return t})();var Xe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=T({type:e}),e.\u0275inj=B({imports:[ee,pe,re]});let t=e;return t})();export{Xe as CountriesModule};
